[workspace]
authors = ["Neclow <neilclow24@gmail.com>"]
channels = ["conda-forge", "bioconda"]
name = "public"
platforms = ["linux-64"]
version = "0.1.0"

[system-requirements]
cuda = "12.6"

[tasks]
post_install = "uv pip install fairseq --no-deps && uv pip install bitarray sacrebleu omegaconf hydra-core"
download_fleurs = "python -m pipeline.download_fleurs data/datasets"
download_glottolog = "python -m pipeline.download_glottolog fleurs-r"
download_models = "python -m pipeline.download_models data/models"
language_identification = "python -m pipeline.language_identification"
discrete_phylo = "python -m pipeline.sentence_trees_discrete"
distance_phylo = "python -m pipeline.sentence_trees_distance"
summary = "python -m pipeline.summarise_results"

[dependencies]
python = "3.10.12.*"
pandas = ">=2.3.2,<3"
requests = ">=2.32.5,<3"
tqdm = ">=4.67.1,<5"
iqtree = ">=3.0.1,<4"
pytorch = ">=2.7.1,<3"
torchaudio = ">=2.7.1,<3"
huggingface_hub = ">=0.34.4,<0.35"
black = ">=25.1.0,<26"
lightning = ">=2.5.4,<3"
ete3 = ">=3.1.3,<4"
rpy2 = ">=3.6.2,<4"
aster = { version = ">=1.23,<2", channel = "bioconda" }
scipy = ">=1.15.2,<2"
datasets = "==3.2.0"
transformers = "==4.45.2"
uv = ">=0.8.13,<0.9"
torchmetrics = ">=1.8.1,<2"
regex = ">=2025.7.34,<2026"

[pypi-dependencies]
pyglottolog = ">=3.16.0, <4"
nemo-toolkit = { version = ">=2.0.0, <3", extras = ["asr"] }
opensmile = ">=2.6.0, <3"
whisper = ">=1.1.10, <2"
speechbrain = ">=1.0.3, <2"
openai-whisper = ">=20250625, <20250626"
torch-pca = ">=1.1.0, <2"
ruff = ">=0.12.11, <0.13"
